(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fa6d"],{b515:function(s){s.exports=JSON.parse('{"created_at":"2022-01-26T22:45:21+08:00","excerpt":"小凸和小方相约玩密室逃脱，这个密室是一棵有 $n$ 个节点的完全二叉树，每个节点有一个灯泡。点亮所有灯泡即可逃出密室。每个灯泡有个权值 $a_i$，每条边也有个权值 $b_i$。点亮第一个灯泡不需要花费，之后每点亮一个新的灯泡 $v$ 的花费，等于上一个被点亮的灯泡 $u$ 到这个点 $v$ 的距离 $D_{u,v}$，乘以这个点的权值 $a_v$。在点灯的过程中，要保证任意时刻所有被点亮的灯泡必须连通，在点亮一个灯泡后必须先点亮其子树所有灯泡才能点亮其他灯泡。请告诉他们，逃出密室的最少花费是多少。","html":"<p>小凸和小方相约玩密室逃脱，这个密室是一棵有 <script type=\\"math/tex\\">n<\/script> 个节点的完全二叉树，每个节点有一个灯泡。点亮所有灯泡即可逃出密室。每个灯泡有个权值 <script type=\\"math/tex\\">a_i<\/script>，每条边也有个权值 <script type=\\"math/tex\\">b_i<\/script>。点亮第一个灯泡不需要花费，之后每点亮一个新的灯泡 <script type=\\"math/tex\\">v<\/script> 的花费，等于上一个被点亮的灯泡 <script type=\\"math/tex\\">u<\/script> 到这个点 <script type=\\"math/tex\\">v<\/script> 的距离 <script type=\\"math/tex\\">D_{u,v}<\/script>，乘以这个点的权值 <script type=\\"math/tex\\">a_v<\/script>。在点灯的过程中，要保证任意时刻所有被点亮的灯泡必须连通，在点亮一个灯泡后必须先点亮其子树所有灯泡才能点亮其他灯泡。请告诉他们，逃出密室的最少花费是多少。</p>\\n<h2 id=\\"input\\">Input</h2>\\n<p>第 <script type=\\"math/tex\\">1<\/script> 行包含 <script type=\\"math/tex\\">1<\/script> 个数 <script type=\\"math/tex\\">n<\/script>，代表节点的个数</p>\\n<p>第 <script type=\\"math/tex\\">2<\/script> 行包含 <script type=\\"math/tex\\">n<\/script> 个数，代表每个节点的权值 <script type=\\"math/tex\\">a_i (i = 1, 2,\\\\dots, n)<\/script>\\n</p>\\n<p>第 <script type=\\"math/tex\\">3<\/script> 行包含 <script type=\\"math/tex\\">n-1<\/script> 个数，代表每条边的权值 <script type=\\"math/tex\\">b_i<\/script>，第 <script type=\\"math/tex\\">i<\/script> 号边是由第 <script type=\\"math/tex\\">(i+1)/2<\/script> 号点连向第 <script type=\\"math/tex\\">i+1<\/script> 号点的边。<script type=\\"math/tex\\">(i=1,2,\\\\dots, n−1)<\/script>\\n</p>\\n<h2 id=\\"input_1\\">Input</h2>\\n<p>输出包含 <script type=\\"math/tex\\">1<\/script> 个数，代表最少的花费。</p>\\n<h2 id=\\"examples\\">Examples</h2>\\n<p>Input 1:</p>\\n<table class=\\"codehilitetable\\"><tr><td class=\\"linenos\\"><div class=\\"linenodiv\\"><pre>1\\n2\\n3</pre></div></td><td class=\\"code\\"><div class=\\"codehilite\\"><pre><span></span><code>3\\n5 1 2\\n2 1\\n</code></pre></div>\\n</td></tr></table>\\n\\n<p>Output 1:</p>\\n<table class=\\"codehilitetable\\"><tr><td class=\\"linenos\\"><div class=\\"linenodiv\\"><pre>1</pre></div></td><td class=\\"code\\"><div class=\\"codehilite\\"><pre><span></span><code>5\\n</code></pre></div>\\n</td></tr></table>\\n\\n<h2 id=\\"solution\\">Solution</h2>\\n<p>树形 dp 神仙题</p>\\n<p>\\n<script type=\\"math/tex\\">f[u][i]<\/script> 为点亮 <script type=\\"math/tex\\">u<\/script> 的子树后返回到 <script type=\\"math/tex\\">u<\/script> 的第 <script type=\\"math/tex\\">i<\/script> 个祖先的最小费用，<script type=\\"math/tex\\">g[u][i]<\/script> 为点亮 <script type=\\"math/tex\\">u<\/script> 的子树后返回到 <script type=\\"math/tex\\">u<\/script> 的第 <script type=\\"math/tex\\">i<\/script> 个祖先的另一个儿子的最小费用。状态转移见代码。</p>\\n<p>最后求答案时，枚举每个节点当成第一个点亮的节点，然后向上求和即可。由于最后一个点亮的节点不需要返回，一个小技巧是令 <script type=\\"math/tex\\">f[u][dep[u]+1]<\/script> 为点亮 <script type=\\"math/tex\\">u<\/script> 的子树后不需要返回的最小费用。</p>\\n<p>复杂度为 <script type=\\"math/tex\\">O(n\\\\log n)<\/script>\\n</p>\\n<table class=\\"codehilitetable\\"><tr><td class=\\"linenos\\"><div class=\\"linenodiv\\"><pre> 1\\n 2\\n 3\\n 4\\n 5\\n 6\\n 7\\n 8\\n 9\\n10\\n11\\n12\\n13\\n14\\n15\\n16\\n17\\n18\\n19\\n20\\n21\\n22\\n23\\n24\\n25\\n26\\n27\\n28\\n29\\n30\\n31\\n32\\n33\\n34\\n35\\n36\\n37\\n38\\n39\\n40\\n41\\n42\\n43\\n44\\n45\\n46\\n47\\n48\\n49\\n50\\n51\\n52\\n53\\n54\\n55\\n56\\n57\\n58\\n59\\n60\\n61\\n62\\n63\\n64\\n65\\n66\\n67\\n68\\n69\\n70</pre></div></td><td class=\\"code\\"><div class=\\"codehilite\\"><pre><span></span><code><span class=\\"cp\\">#include</span> <span class=\\"cpf\\">&lt;bits/stdc++.h&gt;</span><span class=\\"cp\\"></span>\\n<span class=\\"k\\">using</span> <span class=\\"k\\">namespace</span> <span class=\\"n\\">std</span><span class=\\"p\\">;</span>\\n\\n<span class=\\"k\\">using</span> <span class=\\"n\\">ll</span> <span class=\\"o\\">=</span> <span class=\\"kt\\">long</span> <span class=\\"kt\\">long</span><span class=\\"p\\">;</span>\\n<span class=\\"k\\">const</span> <span class=\\"kt\\">int</span> <span class=\\"n\\">N</span> <span class=\\"o\\">=</span> <span class=\\"mf\\">2e5</span><span class=\\"o\\">+</span><span class=\\"mi\\">3</span><span class=\\"p\\">,</span> <span class=\\"n\\">LOGN</span> <span class=\\"o\\">=</span> <span class=\\"n\\">log2</span><span class=\\"p\\">(</span><span class=\\"n\\">N</span><span class=\\"p\\">)</span><span class=\\"o\\">+</span><span class=\\"mi\\">2</span><span class=\\"p\\">;</span>\\n<span class=\\"k\\">const</span> <span class=\\"n\\">ll</span> <span class=\\"n\\">INF</span> <span class=\\"o\\">=</span> <span class=\\"mf\\">1e18</span><span class=\\"p\\">;</span>\\n\\n<span class=\\"kt\\">int</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span>\\n<span class=\\"n\\">ll</span> <span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">N</span><span class=\\"p\\">],</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">N</span><span class=\\"p\\">];</span>\\n<span class=\\"n\\">ll</span> <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">N</span><span class=\\"p\\">][</span><span class=\\"n\\">LOGN</span><span class=\\"p\\">],</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">N</span><span class=\\"p\\">][</span><span class=\\"n\\">LOGN</span><span class=\\"p\\">];</span>\\n<span class=\\"n\\">ll</span> <span class=\\"n\\">dist</span><span class=\\"p\\">[</span><span class=\\"n\\">N</span><span class=\\"p\\">][</span><span class=\\"n\\">LOGN</span><span class=\\"p\\">];</span>\\n\\n<span class=\\"kt\\">int</span> <span class=\\"nf\\">left</span><span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span> <span class=\\"k\\">return</span> <span class=\\"n\\">u</span><span class=\\"o\\">&lt;&lt;</span><span class=\\"mi\\">1</span> <span class=\\"o\\">&lt;=</span> <span class=\\"n\\">n</span> <span class=\\"o\\">?</span> <span class=\\"n\\">u</span><span class=\\"o\\">&lt;&lt;</span><span class=\\"mi\\">1</span><span class=\\"o\\">:</span> <span class=\\"mi\\">0</span><span class=\\"p\\">;</span> <span class=\\"p\\">}</span>\\n<span class=\\"kt\\">int</span> <span class=\\"nf\\">right</span><span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span> <span class=\\"k\\">return</span> <span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"o\\">&lt;&lt;</span><span class=\\"mi\\">1</span><span class=\\"o\\">|</span><span class=\\"mi\\">1</span><span class=\\"p\\">)</span> <span class=\\"o\\">&lt;=</span> <span class=\\"n\\">n</span> <span class=\\"o\\">?</span> <span class=\\"n\\">u</span><span class=\\"o\\">&lt;&lt;</span><span class=\\"mi\\">1</span><span class=\\"o\\">|</span><span class=\\"mi\\">1</span><span class=\\"o\\">:</span> <span class=\\"mi\\">0</span><span class=\\"p\\">;</span> <span class=\\"p\\">}</span>\\n<span class=\\"kt\\">int</span> <span class=\\"nf\\">fa</span><span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"kt\\">int</span> <span class=\\"n\\">i</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span> <span class=\\"k\\">return</span> <span class=\\"n\\">u</span><span class=\\"o\\">&gt;&gt;</span><span class=\\"n\\">i</span><span class=\\"p\\">;</span> <span class=\\"p\\">}</span>\\n<span class=\\"kt\\">int</span> <span class=\\"nf\\">bro</span><span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span> <span class=\\"k\\">return</span> <span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"o\\">^</span><span class=\\"mi\\">1</span><span class=\\"p\\">)</span> <span class=\\"o\\">&lt;=</span> <span class=\\"n\\">n</span> <span class=\\"o\\">?</span> <span class=\\"n\\">u</span><span class=\\"o\\">^</span><span class=\\"mi\\">1</span><span class=\\"o\\">:</span> <span class=\\"mi\\">0</span><span class=\\"p\\">;</span> <span class=\\"p\\">}</span>\\n\\n<span class=\\"n\\">ll</span> <span class=\\"nf\\">solve</span><span class=\\"p\\">()</span> <span class=\\"p\\">{</span>\\n  <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span> <span class=\\"o\\">=</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span> <span class=\\"o\\">--</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span>\\n    <span class=\\"kt\\">int</span> <span class=\\"n\\">lc</span> <span class=\\"o\\">=</span> <span class=\\"n\\">left</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">),</span> <span class=\\"n\\">rc</span> <span class=\\"o\\">=</span> <span class=\\"n\\">right</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">);</span>\\n    <span class=\\"k\\">if</span>  <span class=\\"p\\">(</span><span class=\\"n\\">lc</span> <span class=\\"o\\">&amp;&amp;</span> <span class=\\"n\\">rc</span><span class=\\"p\\">)</span>\\n      <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">);</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n        <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"n\\">min</span><span class=\\"p\\">(</span><span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">][</span><span class=\\"mi\\">1</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">],</span>\\n                      <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">][</span><span class=\\"mi\\">1</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">]);</span>\\n    <span class=\\"k\\">else</span> <span class=\\"k\\">if</span> <span class=\\"p\\">(</span><span class=\\"n\\">lc</span><span class=\\"p\\">)</span>\\n      <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">);</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n        <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">];</span>\\n    <span class=\\"k\\">else</span>\\n      <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">,</span> <span class=\\"n\\">b</span> <span class=\\"o\\">=</span> <span class=\\"n\\">bro</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">);</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">);</span> <span class=\\"n\\">b</span> <span class=\\"o\\">=</span> <span class=\\"n\\">bro</span><span class=\\"p\\">(</span><span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"o\\">++</span><span class=\\"p\\">)))</span>\\n        <span class=\\"k\\">if</span> <span class=\\"p\\">(</span><span class=\\"n\\">b</span><span class=\\"p\\">)</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"p\\">(</span><span class=\\"n\\">dist</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">b</span><span class=\\"p\\">])</span> <span class=\\"o\\">*</span> <span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">b</span><span class=\\"p\\">];</span>\\n  <span class=\\"p\\">}</span>\\n\\n  <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span> <span class=\\"o\\">=</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span> <span class=\\"o\\">--</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span>\\n    <span class=\\"kt\\">int</span> <span class=\\"n\\">lc</span> <span class=\\"o\\">=</span> <span class=\\"n\\">left</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">),</span> <span class=\\"n\\">rc</span> <span class=\\"o\\">=</span> <span class=\\"n\\">right</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">);</span>\\n    <span class=\\"k\\">if</span>  <span class=\\"p\\">(</span><span class=\\"n\\">lc</span> <span class=\\"o\\">&amp;&amp;</span> <span class=\\"n\\">rc</span><span class=\\"p\\">)</span>\\n      <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"o\\">-</span><span class=\\"mi\\">1</span><span class=\\"p\\">);</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n        <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"n\\">min</span><span class=\\"p\\">(</span><span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">][</span><span class=\\"mi\\">1</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">],</span>\\n                      <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">g</span><span class=\\"p\\">[</span><span class=\\"n\\">rc</span><span class=\\"p\\">][</span><span class=\\"mi\\">1</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">]);</span>\\n    <span class=\\"k\\">else</span> <span class=\\"k\\">if</span> <span class=\\"p\\">(</span><span class=\\"n\\">lc</span><span class=\\"p\\">)</span>\\n      <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"o\\">-</span><span class=\\"mi\\">1</span><span class=\\"p\\">);</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n        <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">lc</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">];</span>\\n    <span class=\\"k\\">else</span>\\n      <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"o\\">-</span><span class=\\"mi\\">1</span><span class=\\"p\\">);</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n        <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"n\\">dist</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">*</span> <span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">)];</span>\\n  <span class=\\"p\\">}</span>\\n\\n  <span class=\\"n\\">ll</span> <span class=\\"n\\">ans</span> <span class=\\"o\\">=</span> <span class=\\"n\\">INF</span><span class=\\"p\\">;</span>\\n  <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span> <span class=\\"o\\">=</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span> <span class=\\"o\\">--</span><span class=\\"p\\">)</span> <span class=\\"p\\">{</span>\\n    <span class=\\"n\\">ll</span> <span class=\\"n\\">cnt</span> <span class=\\"o\\">=</span> <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"mi\\">1</span><span class=\\"p\\">];</span>\\n    <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">,</span> <span class=\\"n\\">b</span> <span class=\\"o\\">=</span> <span class=\\"n\\">bro</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">);</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">);</span> <span class=\\"n\\">b</span> <span class=\\"o\\">=</span> <span class=\\"n\\">bro</span><span class=\\"p\\">(</span><span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"o\\">++</span><span class=\\"p\\">)))</span> <span class=\\"p\\">{</span>\\n      <span class=\\"k\\">if</span> <span class=\\"p\\">(</span><span class=\\"n\\">b</span><span class=\\"p\\">)</span> <span class=\\"n\\">cnt</span> <span class=\\"o\\">+=</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">b</span><span class=\\"p\\">]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">b</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">f</span><span class=\\"p\\">[</span><span class=\\"n\\">b</span><span class=\\"p\\">][</span><span class=\\"mi\\">2</span><span class=\\"p\\">];</span>\\n      <span class=\\"k\\">else</span> <span class=\\"n\\">cnt</span> <span class=\\"o\\">+=</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">)]</span><span class=\\"o\\">*</span><span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"o\\">+</span><span class=\\"mi\\">1</span><span class=\\"p\\">)];</span>\\n    <span class=\\"p\\">}</span>\\n    <span class=\\"n\\">ans</span> <span class=\\"o\\">=</span> <span class=\\"n\\">min</span><span class=\\"p\\">(</span><span class=\\"n\\">ans</span><span class=\\"p\\">,</span> <span class=\\"n\\">cnt</span><span class=\\"p\\">);</span>\\n  <span class=\\"p\\">}</span>\\n  <span class=\\"k\\">return</span> <span class=\\"n\\">ans</span><span class=\\"p\\">;</span>\\n<span class=\\"p\\">}</span>\\n\\n<span class=\\"kt\\">int</span> <span class=\\"nf\\">main</span><span class=\\"p\\">()</span> <span class=\\"p\\">{</span>\\n  <span class=\\"n\\">cin</span> <span class=\\"o\\">&gt;&gt;</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span>\\n  <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">i</span> <span class=\\"o\\">&lt;=</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span> <span class=\\"n\\">cin</span> <span class=\\"o\\">&gt;&gt;</span> <span class=\\"n\\">a</span><span class=\\"p\\">[</span><span class=\\"n\\">i</span><span class=\\"p\\">];</span>\\n  <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">2</span><span class=\\"p\\">;</span> <span class=\\"n\\">i</span> <span class=\\"o\\">&lt;=</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span> <span class=\\"n\\">cin</span> <span class=\\"o\\">&gt;&gt;</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">i</span><span class=\\"p\\">];</span>\\n\\n  <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">u</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span> <span class=\\"o\\">&lt;=</span> <span class=\\"n\\">n</span><span class=\\"p\\">;</span> <span class=\\"n\\">u</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n    <span class=\\"k\\">for</span> <span class=\\"p\\">(</span><span class=\\"kt\\">int</span> <span class=\\"n\\">i</span> <span class=\\"o\\">=</span> <span class=\\"mi\\">1</span><span class=\\"p\\">;</span> <span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"n\\">i</span><span class=\\"p\\">);</span> <span class=\\"n\\">i</span> <span class=\\"o\\">++</span><span class=\\"p\\">)</span>\\n      <span class=\\"n\\">dist</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">][</span><span class=\\"n\\">i</span><span class=\\"p\\">]</span> <span class=\\"o\\">=</span> <span class=\\"n\\">dist</span><span class=\\"p\\">[</span><span class=\\"n\\">fa</span><span class=\\"p\\">(</span><span class=\\"n\\">u</span><span class=\\"p\\">,</span> <span class=\\"mi\\">1</span><span class=\\"p\\">)][</span><span class=\\"n\\">i</span><span class=\\"o\\">-</span><span class=\\"mi\\">1</span><span class=\\"p\\">]</span> <span class=\\"o\\">+</span> <span class=\\"n\\">w</span><span class=\\"p\\">[</span><span class=\\"n\\">u</span><span class=\\"p\\">];</span>\\n\\n  <span class=\\"n\\">cout</span> <span class=\\"o\\">&lt;&lt;</span> <span class=\\"n\\">solve</span><span class=\\"p\\">();</span>\\n  <span class=\\"k\\">return</span> <span class=\\"mi\\">0</span><span class=\\"p\\">;</span>\\n<span class=\\"p\\">}</span>\\n</code></pre></div>\\n</td></tr></table>","tags":[{"name":"dp","url":"/tags/dp"}],"title":"SCOI-2015 小凸玩密室","updated_at":"2022-01-26T22:45:21+08:00","url":"/docs/dp/tree-based-dp/luogu-4253"}')}}]);
//# sourceMappingURL=chunk-2d20fa6d.82b2acd0.js.map